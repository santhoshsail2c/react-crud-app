(this.webpackJsonpwekan=this.webpackJsonpwekan||[]).push([[0],{184:function(e,t,a){e.exports=a(346)},189:function(e,t,a){},343:function(e,t,a){},346:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(7),s=a.n(o),l=(a(189),a(190),a(132)),c=a(49),i=a(161);var u=function(e){var t=e.component,a=Object(i.a)(e,["component"]);return n.a.createElement(c.b,Object.assign({},a,{render:function(e){return localStorage.getItem("token")?n.a.createElement(t,e):n.a.createElement(c.a,{to:{pathname:"/",state:{from:e.location}}})}}))},m=a(21),p=a.n(m),d=a(62),h=a(63),f=a(68),g=a(64),b=a(69),E="/",v="/secured",y="http://dev.api.staller.show/",S="SET_TOKEN",O=a(351),C=a(352),j=a(9),w=a(33),I=a(162),k=a(102);var x=function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).loginAPICall=function(e){var t,r;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,p.a.awrap(fetch(y+"v1/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.username,password:Object(I.sha512)(e.password)})}));case 3:return t=n.sent,n.next=6,p.a.awrap(t.json());case 6:return r=n.sent,localStorage.setItem("token",r.data.access_token),a.props.setToken({token:r.data.access_token}),a.props.history.push(v),n.abrupt("return",r);case 13:n.prev=13,n.t0=n.catch(0),console.log(n.t0);case 16:case"end":return n.stop()}}),null,null,[[0,13]])},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){e||a.loginAPICall(t)}))},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("token")&&this.props.history.push(v)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return n.a.createElement(O.a,{onSubmit:this.handleSubmit,className:"login-form"},n.a.createElement(O.a.Item,null,e("username",{rules:[{required:!0,message:"Please input your username!"}]})(n.a.createElement(C.a,{prefix:n.a.createElement(j.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),n.a.createElement(O.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(n.a.createElement(C.a,{prefix:n.a.createElement(j.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),n.a.createElement(O.a.Item,null,n.a.createElement(w.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in")))}}]),t}(n.a.Component),_=O.a.create({name:"login"})(x),P=Object(k.b)((function(e){return{reduxState:e}}),(function(e){return{setToken:function(t){return e({type:S,payload:t.token})}}}))(_),A=a(11),H=a.n(A),T=a(355),D=a(177),N=a(354),Y=a(349),q=a(78),B={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},M={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},L=function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).state={loading:!1},a.createHorsesAPICall=function(e){var t,r,n,o,s,l,c,i;return p.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.horse_name,r=e.horse_number,n=e.age_verified,o=e.dob,s=e.color,l=e.ushja_registered,a.setState({loading:!0}),u.prev=2,u.next=5,p.a.awrap(fetch(y+"v1/horses",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify({horse_name:t,horse_number:r,age_verified:"true"===n,dob:H()(o).format("YYYY-MM-DD"),color:s,ushja_registered:"true"===l})}));case 5:return c=u.sent,u.next=8,p.a.awrap(c.json());case 8:return i=u.sent,T.a.success("Horse added Successfully"),a.props.form.resetFields(),a.props.getHorsesAPICall(),a.props.modalClose(),a.setState({loading:!1}),u.abrupt("return",i);case 17:u.prev=17,u.t0=u.catch(2),console.log(u.t0),T.a.error("Oops try again");case 21:case"end":return u.stop()}}),null,null,[[2,17]])},a.editHorsesAPICall=function(e){var t,r,n,o,s,l,c,i;return p.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.horse_name,r=e.horse_number,n=e.age_verified,o=e.dob,s=e.color,l=e.ushja_registered,a.setState({loading:!0}),u.prev=2,u.next=5,p.a.awrap(fetch(y+"v1/horses/"+a.props.editItem.id,{method:"PUT",headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-type":"application/json"},body:JSON.stringify({horse_name:t,horse_number:r,age_verified:"true"===n,dob:H()(o).format("YYYY-MM-DD"),color:s,ushja_registered:"true"===l})}));case 5:return c=u.sent,u.next=8,p.a.awrap(c.json());case 8:return i=u.sent,a.props.form.resetFields(),a.props.modalClose(),a.setState({loading:!1}),T.a.success("Horse updated Successfully"),u.abrupt("return",i);case 16:u.prev=16,u.t0=u.catch(2),console.log(u.t0),T.a.error("Oops try again");case 20:case"end":return u.stop()}}),null,null,[[2,16]])},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){e||(a.props.editStatus?a.editHorsesAPICall(t):a.createHorsesAPICall(t))}))},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.editStatus,r=t.editItem;return n.a.createElement(O.a,Object.assign({},B,{onSubmit:this.handleSubmit}),n.a.createElement(O.a.Item,{label:n.a.createElement("span",null,"Horse Name\xa0",n.a.createElement(D.a,{title:"Please input name of the horse."},n.a.createElement(j.a,{type:"question-circle-o"}))),hasFeedback:!0},e("horse_name",{rules:[{required:!0,message:"Please input horse name!"}],initialValue:a?r&&r.horse_name:""})(n.a.createElement(C.a,{allowClear:!0,maxLength:255}))),n.a.createElement(O.a.Item,{label:n.a.createElement("span",null,"Horse number\xa0",n.a.createElement(D.a,{title:"Please input number of the horse."},n.a.createElement(j.a,{type:"question-circle-o"}))),hasFeedback:!0},e("horse_number",{rules:[{required:!0,message:"Please input horse number!"}],initialValue:a?r&&r.horse_number:""})(n.a.createElement(C.a,{allowClear:!0}))),n.a.createElement(O.a.Item,{label:n.a.createElement("span",null,"Age Verified\xa0",n.a.createElement(D.a,{title:"Select if age verified or not"},n.a.createElement(j.a,{type:"question-circle-o"})))},e("age_verified",{initialValue:a?r&&1===r.age_verified?"true":"false":""})(n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Button,{value:"true"},"Yes"),n.a.createElement(N.a.Button,{value:"false"},"No")))),n.a.createElement(O.a.Item,{label:n.a.createElement("span",null,"DOB\xa0",n.a.createElement(D.a,{title:"Please input DOB."},n.a.createElement(j.a,{type:"question-circle-o"})))},e("dob",{rules:[{type:"object",required:!0,message:"Please select time!"}],initialValue:a?r&&H()(r.dob,"YYYY-MM-DD"):null})(n.a.createElement(Y.a,null))),n.a.createElement(O.a.Item,{label:n.a.createElement("span",null,"Color\xa0",n.a.createElement(D.a,{title:"Please input color of the horse."},n.a.createElement(j.a,{type:"question-circle-o"}))),hasFeedback:!0},e("color",{rules:[{required:!0,message:"Please select color!"}],initialValue:a?r&&r.color:""})(n.a.createElement(q.a,{placeholder:"Please select a color"},n.a.createElement(q.a.Option,{value:"green"},"Green"),n.a.createElement(q.a.Option,{value:"red"},"Red")))),n.a.createElement(O.a.Item,{label:n.a.createElement("span",null,"Ushja Registered\xa0",n.a.createElement(D.a,{title:"Select if Ushja Registered or not"},n.a.createElement(j.a,{type:"question-circle-o"})))},e("ushja_registered",{initialValue:a?r&&1===r.ushja_registered?"true":"false":""})(n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Button,{value:"true"},"Yes"),n.a.createElement(N.a.Button,{value:"false"},"No")))),n.a.createElement(O.a.Item,M,n.a.createElement(w.a,{type:"primary",loading:this.state.loading,htmlType:"submit"},a?"Edit":"Create")))}}]),t}(n.a.Component),F=O.a.create({name:"horse"})(L),V=a(172),J=a(347),z=a(350),G=a(348),U=a(353),R=function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).state={loading:!0,horsesList:null,visible:!1,editStatus:!1,editItem:null},a.createHorse=function(){a.setState({editStatus:!1}),a.showModal()},a.editHorse=function(e){a.setState({editStatus:!0,editItem:e}),a.showModal()},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){a.setState({visible:!1}),a.getHorsesAPICall()},a.cancel=function(e){T.a.error("Operation cancelled!")},a.logOut=function(){localStorage.clear(),a.props.history.push(E)},a.handleCancel=function(e){a.setState({visible:!1}),a.getHorsesAPICall()},a.getHorsesAPICall=function(e){var t,r;return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.awrap(fetch(y+"v1/horses",{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}}));case 3:return t=e.sent,e.next=6,p.a.awrap(t.json());case 6:r=e.sent,a.setState({loading:!1,horsesList:r}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),null,null,[[0,10]])},a.deleteHorse=function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.awrap(fetch(y+"v1/horses/"+e.id,{method:"DELETE",headers:{Authorization:"Bearer "+localStorage.getItem("token"),Accept:"application/json"},body:JSON.stringify(e)}));case 3:a.getHorsesAPICall(),T.a.success("Horse deleted Successfully"),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),T.a.error("Oops try again");case 11:case"end":return t.stop()}}),null,null,[[0,7]])},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.getHorsesAPICall()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,r=t.horsesList,o=t.editStatus,s=t.editItem;return a?n.a.createElement(V.a,{style:{marginTop:"140px"}}):n.a.createElement("div",null,n.a.createElement(w.a,{style:{marginTop:"50px"},onClick:this.createHorse},"Create"),n.a.createElement(J.a,{title:"Are you sure log out?",onConfirm:this.logOut,onCancel:this.cancel,okText:"Yes, I want to log out!",cancelText:"No"},n.a.createElement(w.a,{type:"dashed",style:{marginLeft:"10px"}},"Logout")),n.a.createElement(z.a,{style:{padding:"50px 250px 50px 250px"},itemLayout:"horizontal",dataSource:r?r.data:[],renderItem:function(t){return n.a.createElement(z.a.Item,null,n.a.createElement(z.a.Item.Meta,{avatar:n.a.createElement(G.a,{src:"http://pngimg.com/uploads/horse/horse_PNG2552.png"}),title:"Horse Name is ".concat(t.horse_name),description:"Horse Number is ".concat(t.horse_number)}),n.a.createElement(w.a,{onClick:function(){return e.editHorse(t)},type:"primary"},"Edit"),n.a.createElement(J.a,{title:"Are you sure delete this horse?",onConfirm:function(){return e.deleteHorse(t)},onCancel:e.cancel,okText:"Yes",cancelText:"No"},n.a.createElement(w.a,{type:"danger",style:{marginLeft:"10px"}},"Delete")))}}),n.a.createElement(U.a,{title:"".concat(!0===o?"Edit":"Create"," Horse"),visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,footer:null},n.a.createElement(F,{modalClose:this.handleCancel,getHorsesAPICall:this.getHorsesAPICall,editStatus:o,editItem:s})))}}]),t}(n.a.Component);a(343);var W=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(l.a,null,n.a.createElement(c.d,null,n.a.createElement(u,{exact:!0,path:v,component:R}),n.a.createElement(c.b,{path:E,component:P}))))},K=a(175),$=a(48),Q=a(139),X=a(176),Z=a.n(X),ee=a(179),te={access_token:""};var ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;return t.type===S?Object(ee.a)({},e,{access_token:t.payload}):e},re={key:"root",storage:Z.a},ne=Object(Q.a)(re,ae),oe=Object($.c)(ne),se=Object(Q.b)(oe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(k.a,{store:oe},n.a.createElement(K.a,{loading:null,persistor:se},n.a.createElement(W,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[184,1,2]]]);
//# sourceMappingURL=main.663ca995.chunk.js.map